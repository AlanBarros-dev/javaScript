<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Exercicio Final</title>
</head>
<body>
    <h1>vagas</h1>

    <script>
    let vagas = []
    let vaga = {}
    let option = ""


    function listarVagas(){
        const vagasEmTexto = vagas.reduce(function(textoFinal, vaga, indice){
            // 1. nome, (x candidatos)
            textoFinal += + indice +". "
            textoFinal += vaga.nome
            textoFinal += " (" + vaga.candidatos.length + " candidatos) \n"
            return textoFinal
        }, "")

        alert(vagasEmTexto)
    }

    function novaVaga(){
        vaga.nome = prompt(`Digite o nome da vaga: `)
        vaga.descricao = prompt(`Digite a descrição da vaga: `)
        vaga.data = (prompt(`Digite a data limite da vaga: (dd/mm/aaaa)`))
        const confirmarVaga = confirm(
            `Confirmar vaga ?\n` + `nome: ${vaga.nome}\n` + `descrição: ${vaga.descricao}\n` + `Data Limite: ${vaga.data}`
        )

        if(confirmarVaga){
            const novaVaga = {nome, descricao, data, candidatos: []}
            vagas.push(novaVaga)
            alert('Vaga Criada !')
        }
    }

    function exibirVaga(){
        const indice = prompt("Inform o indice da vaga que deseja exibir:")

        if(indice >= vagas.length || indice < 0){
            alert("Indice Invalido")
            return
        }

        const vaga = vagas[indice]

        const candidatosEmTexto = vaga.candidatos.reduce(function(textoFinal, candidato){
           return textoFinal + "\n -" + candidato
        }, "")

        alert(
            "Vaga n." + indice +
            "\nNome: " + vaga.nome +
            "\nDescricao:" + vaga.descricao +
            "\nData Limite: " + vaga.data +
            "\nQuantidade de candidatos: " + vaga.candidatos.length +
            "\nCandidatos Inscritos:" + candidatosEmTexto
        )
    }

    function inscreverCandidato(){
        const candidato = prompt("Informe o nome do(a) candidato(a):")
        const indice = prompt("indorme o indice da vaga para qual o candidato quer se inscrever:")
        const vaga = vagas[indice]

        const confirmacao = confirm(
            "Deseja inscrever o candidato" + candidato + "na vaga" + indice + "?\n" +
            "Nome: " + vaga.nome + "\nDescricao: " + vaga.descricao + "\nData Limite: " + vaga.data
        )

        if(confirmacao){
            vaga.candidatos.push(candidato)
            alert("inscricao realizada!")
        }
    }

    function excluirVaga(){
        const indice = prompt("Informe o indice da vaga que deseja excluir:")
        const vaga = vagas[indice]

        const confirmacao = confirm(
            "Tem certeza que deseja excluir a vaga" + indice + "?\n"+ "Nome: " + vaga.nome + "\nDescricao: " + vaga.descricao + "\nData Limite: " + vaga.data
        )

        if(confirmacao){
            vagas.splice(indice, 1)
            alert("vaga excluida")
        } 
    }

    function exibirMenu(){
        const option = parseFloat(prompt(`Vagas de Estagio / Trainee escolha uma das opções: \n
            1. Lista de vagas disponiveis \n
            2. Criar uma vaga \n
            3. Visualizar uma vagan \n
            4. Inscrever um candidato em uma vaga \n
            5. Excluir uma vaga \n
            6. Sair`)
        )

        return option
    }

    function executar(){
        let option = exibirMenu()
        do{
            switch(option){
                case 1:
                    listarVagas()
                break
                    
                case 2:
                    novaVaga()
                break

                case 3:
                    exibirVaga()
                break

                case 4:
                    inscreverCandidato()
                break

                case 5:
                    excluirVaga()
                break

                case 6:
                    alert(`Encerrando...`)
                break

                default:
                    alert(`opcao incorreta    !`)
            }
        }while(option != 6)

    }

    </script>
</body>
</html>